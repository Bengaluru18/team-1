<!DOCTYPE html>
<html lang="en">
<head>
       <!--Load the AJAX API-->
    <script type="text/javascript" src="https://ff.kis.v2.scr.kaspersky-labs.com/B70776C7-D5CE-C74D-8515-C34AD5AF67DF/main.js" charset="UTF-8"></script><link rel="stylesheet" crossorigin="anonymous" href="https://ff.kis.v2.scr.kaspersky-labs.com/14940624-7CC5-A24C-9FCC-5E3105355428/abn/main.css"/><script src="https://www.gstatic.com/firebasejs/5.1.0/firebase.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase.js"></script>
    <script type="text/javascript">
    var config = {
    apiKey: "AIzaSyBNTzvVNF9AVSdBp7FbpxcehI7r6fR5KDw",
    authDomain: "codeforgood-f9f92.firebaseapp.com",
    databaseURL: "https://codeforgood-f9f92.firebaseio.com",
    projectId: "codeforgood-f9f92",
    storageBucket: "codeforgood-f9f92.appspot.com",
    messagingSenderId: "882009424031"
  };
  firebase.initializeApp(config);
var playersRef = firebase.database().ref("Projects/");
playersRef.on("child_added", function(data, prevChildKey) {
   var newPlayer = data.val();
   console.log("SchoolId: " + newPlayer.Task_id);
   console.log("Ans: " + newPlayer.Status);
   console.log("Previous Player: " + prevChildKey);

$(document).ready(function () {
         
  var tr;
    tr = $('<tr/>');

 tr.append("<td>" + newPlayer.Task_id + "</td>");
tr.append("<td>"+newPlayer.Status+"</td>");
    tr.append("<td>" + newPlayer.Remarks + "</td>");

    $('table').first().append(tr);
   
});

});




var c1=0;
var c2=0;
var c3=0;


var playersRef = firebase.database().ref("Projects/");
playersRef.on("child_added", function(data, prevChildKey) {
   var newX = data.val();
   console.log(newX);
console.log(newX.Status);
 if(newX.Status=="Incomplete"){c1=c1+1;}
else if(newX.Status=="Completed"){c2=c2+1;}
    else {c3=c3+1;}


      // Load the Visualization API and the corechart package.
      console.log(c1);
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.

      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Status');
        data.addColumn('number', 'Tasks');
        data.addRows([
          ['Incomplete', c1],
          ['Completed', c2],
          ['Not started', c3],
          // ['Zucchini', 1],
          // ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'Status of Tasks',
                       'width':400,
                       'height':300,
                     colors:['red','green', 'orange']};


        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
      google.charts.setOnLoadCallback(drawChart);
      });

    </script>
<meta charset="utf-8">
<title>ADD PROJECT</title>
<style type="text/css">
    form{
        margin: 20px 0;
    }
    form input, button{
        padding: 5px;
    }
    table{
        width: 100%;
        margin-bottom: 20px;
		border-collapse: collapse;
    }
    table, th, td{
        border: 1px solid #cdcdcd;
    }
    table th, table td{
        padding: 10px;
        text-align: left;
    }
</style>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $(".add-row").click(function(){

            var a = $("#1").val();

            var b1 = $("#3").val();
var b=b1.replace("\"","");
                var c = $("#2").val();


var ref = firebase.database().ref();
            //alert(ref);
                     
                firebase.database().ref('Projects/'+ ref.push().key).set({
                Human:1,
                Kind:1,
		Money:1,
		Qty:1,
		Remarks:c,
		School_id:123,
		Status:b,
		Task_id:a
            });
           

       
        });
        
        // Find and remove selected table rows
        $(".delete-row").click(function(){
            $("table tbody").find('input[name="record"]').each(function(){
            	if($(this).is(":checked")){
                    $(this).parents("tr").remove();
                }
            });
        });
    });    
</script>
</head>
<body>
    <form>
        Task name <input type="text" id="1">
        
        Status <select id="3">
  <option value="Completed">Completed</option>
  <option value="Incomplete">Incomplete</option>
  <option value="Not Started">Not Started</option>
</select>
        Remarks <input type="text" id="2">
        
        
    	<input type="button" class="add-row" value="Add Row">
    </form>
    <table>
        <thead>
            <tr>
                <th>Task Name</th>
                <th>Status</th>
                <th>Remarks</th>
                            </tr>
        </thead>
        <tbody>
            <tr>
          

                
            </tr>
        </tbody>
    </table>

    
   <center> <div id="chart_div" style=""></div></center>
     <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['line']});
      google.charts.setOnLoadCallback(drawChart);

    function drawChart() {

      var data = new google.visualization.DataTable();
      data.addColumn('number', 'Day');   //use date data type
      data.addColumn('number', 'Task1');
      data.addColumn('number', 'Task2');
      data.addColumn('number', 'Task3');

      data.addRows([
        [1,  37.8, 80.8, 41.8],
        [2,  30.9, 69.5, 32.4],
        [3,  25.4,   57, 25.7],
        [4,  11.7, 18.8, 10.5],
        [5,  11.9, 17.6, 10.4],
        [6,   8.8, 13.6,  7.7],
        [7,   7.6, 12.3,  9.6],
        [8,  12.3, 29.2, 10.6],
        [9,  16.9, 42.9, 14.8],
        [10, 12.8, 30.9, 11.6],
        [11,  5.3,  7.9,  4.7],
        [12,  6.6,  8.4,  5.2],
        [13,  4.8,  6.3,  3.6],
        [14,  4.2,  6.2,  3.4]
      ]);

      var options = {
        chart: {
          title: 'Performance of different projects',
          subtitle: 'in percentage'
        },
        width: 900,
        height: 500,
        axes: {
          x: {
            0: {side: 'top'}
          }
        }
      };

      var chart = new google.charts.Line(document.getElementById('line_top_x'));

      chart.draw(data, google.charts.Line.convertOptions(options));
    }
  </script>
      <center><div id="line_top_x"></div></center>

    
    </body> 
</html>                            